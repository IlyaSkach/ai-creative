# Пошагово: TELEGRAM_API_ID, TELEGRAM_API_HASH и TELEGRAM_SESSION_STRING

Эти переменные нужны, чтобы приложение могло **заходить в канал и читать посты** за последнюю неделю (для эксклюзивного креатива). Всё делается **внутри этого проекта**, без других репозиториев.

Без этих переменных работает только парсинг названия и описания со страницы t.me.

---

## Шаг 1. API ID и API Hash

1. Откройте в браузере: **https://my.telegram.org**
2. Войдите по **номеру телефона** (в формате +79xxxxxxxxx). Придёт код в приложение Telegram.
3. После входа нажмите **«API development tools»**.
4. Если приложения ещё нет — заполните форму:
   - **App title**: любое (например `ai-creative`)
   - **Short name**: любое (например `aicreative`)
   - **Platform**: Other
   - Остальное можно оставить пустым → **Create application**.
5. На странице приложения будут:
   - **App api_id** — это ваш `TELEGRAM_API_ID` (число, без кавычек).
   - **App api_hash** — это ваш `TELEGRAM_API_HASH` (строка).

Скопируйте оба значения в **`.env`** в корне проекта ai-creative:

```env
TELEGRAM_API_ID=12345678
TELEGRAM_API_HASH=abcdef1234567890abcdef1234567890
```

---

## Шаг 2. Строка сессии (TELEGRAM_SESSION_STRING)

Сессия — это результат «входа» вашего аккаунта в приложение. Её получают **один раз** командой входа в этом же проекте.

1. Убедитесь, что в **`.env`** в корне ai-creative уже заданы **TELEGRAM_API_ID** и **TELEGRAM_API_HASH** (шаг 1).

2. Из **корня проекта ai-creative** выполните:

   ```bash
   npm run login
   ```

3. Скрипт запросит:
   - **Номер телефона** в формате +79xxxxxxxxx
   - **Код** из Telegram (сообщение или СМС)
   - **Пароль 2FA** — если у вас включена двухэтапная аутентификация

   Если после ввода номера появится сообщение про «Phone migrated» или «connection closed» и запрос кода не появится — просто запустите **`npm run login`** ещё раз и, когда попросит код, введите код из Telegram (он мог прийти при первой попытке).

4. После успешного входа:
   - Сессия сохранится в файл **`session/session.txt`** в этом проекте.
   - В консоль выведется строка для копирования.

5. Добавьте её в **`.env`** в корне ai-creative:

   ```env
   TELEGRAM_SESSION_STRING=1BQANOTEuLjE...длинная строка...
   ```

   Можно скопировать строку из вывода консоли или открыть **`session/session.txt`** и скопировать всё содержимое — это одна и та же строка.

   **Необязательно:** если не добавлять `TELEGRAM_SESSION_STRING` в `.env`, приложение само прочитает сессию из файла **`session/session.txt`** (если он есть). Удобно после первого `npm run login`.

6. Готово. При следующем анализе канала приложение будет подгружать посты за последнюю неделю.

---

## Итог в .env (в корне ai-creative)

Должны быть заполнены три строки:

```env
TELEGRAM_API_ID=12345678
TELEGRAM_API_HASH=abcdef1234567890abcdef1234567890
TELEGRAM_SESSION_STRING=1BQANOTEuLjE...длинная строка из session.txt или из вывода npm run login...
```

---

## Важно

- **Никому не передавайте** API Hash и строку сессии — это полный доступ к вашему аккаунту Telegram.
- Файл **`session/session.txt`** добавлен в `.gitignore` — не коммитьте его в репозиторий.
- Если выйдете из аккаунта в Telegram или смените пароль, сессия может стать недействительной — тогда снова выполните `npm run login` и обновите `TELEGRAM_SESSION_STRING` в `.env`.
