# AI Creative

Веб-приложение для генерации рекламных креативов по Telegram-каналу: вставьте ссылку на канал → ИИ анализирует название, описание и посты → создаёт эксклюзивный креатив со ссылкой на канал. Поддерживаются выбор «с картинкой / только текст», ручное и ИИ-редактирование, отправка в Telegram.

## Что нужно (у вас уже есть)

- **Токен Telegram-бота** — от [@BotFather](https://t.me/BotFather)
- **API DeepSeek** — для генерации и редактирования текста
- **API BotHub** — для генерации картинки (DALL-E)

## Что ещё нужно для полного функционала

1. **Анализ постов канала**  
   Без дополнительных настроек приложение парсит только **название и описание** со страницы `t.me/username` (бота в канал добавлять не нужно). Этого достаточно для базового креатива.  
   Чтобы ИИ анализировал **посты за последнюю неделю** и делал по ним эксклюзивный креатив, нужен Telegram Client (MTProto):
   - Зарегистрировать приложение на [my.telegram.org](https://my.telegram.org/apps) и получить **API ID** и **API Hash**.
   - Один раз авторизоваться и сохранить сессию в переменную **TELEGRAM_SESSION_STRING**.  
   Сессию получают в этом же проекте: выполнить `npm run login`, после входа строка сохранится в `session/session.txt` — скопировать в `.env` как `TELEGRAM_SESSION_STRING` (см. ИНСТРУКЦИЯ_TELEGRAM_КЛИЕНТ.md).

2. **Переменные окружения**  
   Скопировать `.env.example` в `.env` и заполнить ключи.

## Запуск

```bash
# из корня репозитория ai-creative
npm install
cp .env.example .env
# отредактировать .env: TELEGRAM_BOT_TOKEN, DEEPSEEK_API_KEY, BOTHUB_API_KEY

# разработка (API + фронт одновременно)
npm run dev

# отдельно
npm run dev:api   # API на http://localhost:3001
npm run dev:web   # фронт на http://localhost:5173
```

Откройте [http://localhost:5173](http://localhost:5173), вставьте ссылку на канал (например `https://t.me/durov`), нажмите «Анализировать канал», затем «Сгенерировать креатив». После этого можно отредактировать текст вручную или через ИИ и отправить креатив в Telegram (указать chat_id или @channel).

## API

| Метод | Путь | Описание |
|-------|------|----------|
| POST | `/api/channel/analyze` | Анализ канала по ссылке. Body: `{ "link": "t.me/username" }` |
| POST | `/api/creative/generate` | Генерация креатива. Body: `{ "channelInfo": {...}, "withImage": true }` |
| POST | `/api/creative/edit` | Редактирование текста через ИИ. Body: `{ "text": "...", "instruction": "..." }` |
| POST | `/api/telegram/send` | Отправка в Telegram. Body: `{ "to": "chat_id или @channel", "text": "...", "imageBase64?": "..." }` |

## Архитектура

См. [ARCHITECTURE.md](./ARCHITECTURE.md).

## Масштабирование

- Backend stateless, можно запускать несколько инстансов.
- Парсер постов (если включён) использует одну сессию Telegram Client; при росте нагрузки можно вынести получение постов в отдельный сервис (например tg-parser как HTTP API).
- При необходимости можно добавить очередь (Redis/Bull) для генерации креативов и WebSocket для статуса.
